{"openapi":"3.1.0","info":{"title":"Hotel Booking System API","version":"0.1.0"},"paths":{"/roles/":{"get":{"tags":["ROLES"],"summary":"List Roles","operationId":"list_roles_roles__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/RoleResponse"},"type":"array","title":"Response List Roles Roles  Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["ROLES"],"summary":"Create New Role","operationId":"create_new_role_roles__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/permissions/assign":{"post":{"tags":["PERMISSIONS"],"summary":"Assign Permissions To Role","operationId":"assign_permissions_to_role_permissions_assign_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RolePermissionAssign"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RolePermissionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/permissions/":{"get":{"tags":["PERMISSIONS"],"summary":"Get Permissions","operationId":"get_permissions_permissions__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"permission_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Permission id to fetch roles for","title":"Permission Id"},"description":"Permission id to fetch roles for"},{"name":"role_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Role id to fetch permissions for","title":"Role Id"},"description":"Role id to fetch permissions for"},{"name":"resources","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"type":"string"}},{"type":"null"}],"description":"List of resources to filter by","title":"Resources"},"description":"List of resources to filter by"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/signup":{"post":{"tags":["AUTH"],"summary":"Signup","operationId":"signup_auth_signup_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/otp/request":{"post":{"tags":["AUTH"],"summary":"Request Otp","description":"Request an OTP for password reset or signin verification.\nIf SMTP is not configured the generated OTP will be returned in the response (dev convenience).","operationId":"request_otp_auth_otp_request_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OTPRequest"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/otp/verify":{"post":{"tags":["AUTH"],"summary":"Verify Otp Endpoint","description":"Verify an OTP. If verification_type is PASSWORD_RESET and new_password is provided,\nupdate the user's password.","operationId":"verify_otp_endpoint_auth_otp_verify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OTPVerify"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/login":{"post":{"tags":["AUTH"],"summary":"Login","description":"OAuth2 Login endpoint that returns JWT tokens on successful authentication.","operationId":"login_auth_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_auth_login_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/refresh":{"post":{"tags":["AUTH"],"summary":"Refresh Tokens","description":"Refresh (rotate) access and refresh tokens using a valid refresh token.","operationId":"refresh_tokens_auth_refresh_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/logout":{"post":{"tags":["AUTH"],"summary":"Logout","description":"Logout: blacklist tokens and revoke the session associated with the provided access token.","operationId":"logout_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/auth/admin/register":{"post":{"tags":["AUTH"],"summary":"Register Admin","description":"Endpoint to create Admin users.\nRequires `Admin_Creation` resource with `WRITE` permission.","operationId":"register_admin_auth_admin_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/room-types/":{"post":{"tags":["ROOM_TYPES"],"summary":"Create Room Type","operationId":"create_room_type_api_room_types__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomTypeCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomTypeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["ROOM_TYPES"],"summary":"Get Room Types","description":"Single GET for room-types.\n\n- If `room_type_id` is provided, return the single RoomTypeResponse.\n- Otherwise return a list of RoomTypeResponse (filtered by include_deleted).\nAuthentication required; basic users are allowed.","operationId":"get_room_types_api_room_types__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"room_type_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"If provided, returns the single room type with this ID","title":"Room Type Id"},"description":"If provided, returns the single room type with this ID"},{"name":"include_deleted","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":false,"title":"Include Deleted"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/room-types/{room_type_id}":{"put":{"tags":["ROOM_TYPES"],"summary":"Update Room Type","operationId":"update_room_type_api_room_types__room_type_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"room_type_id","in":"path","required":true,"schema":{"type":"integer","title":"Room Type Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomTypeUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomTypeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["ROOM_TYPES"],"summary":"Soft Delete Room Type","operationId":"soft_delete_room_type_api_room_types__room_type_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"room_type_id","in":"path","required":true,"schema":{"type":"integer","title":"Room Type Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/rooms/":{"post":{"tags":["ROOMS"],"summary":"Create Room","operationId":"create_room_api_rooms__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["ROOMS"],"summary":"Get Rooms","description":"Single GET endpoint for rooms.\n\nBehavior:\n- If `room_id` is provided: return the single room as `RoomResponse`.\n- Otherwise: return a list of `Room` matching optional filters.\n\nAccess control: only non-basic users (admins/managers) may access this endpoint.","operationId":"get_rooms_api_rooms__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"room_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"If provided, returns the single room with this ID","title":"Room Id"},"description":"If provided, returns the single room with this ID"},{"name":"room_type_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Room Type Id"}},{"name":"status_filter","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status Filter"}},{"name":"is_freezed","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Freezed"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/rooms/{room_id}":{"put":{"tags":["ROOMS"],"summary":"Update Room","operationId":"update_room_api_rooms__room_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"room_id","in":"path","required":true,"schema":{"type":"integer","title":"Room Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["ROOMS"],"summary":"Delete Room","operationId":"delete_room_api_rooms__room_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"room_id","in":"path","required":true,"schema":{"type":"integer","title":"Room Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/amenities/":{"post":{"tags":["AMENITIES"],"summary":"Create Amenity","operationId":"create_amenity_api_amenities__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AmenityCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AmenityResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["AMENITIES"],"summary":"Get Amenities","operationId":"get_amenities_api_amenities__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"amenity_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"If provided, return this amenity and its linked rooms","title":"Amenity Id"},"description":"If provided, return this amenity and its linked rooms"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/amenities/{amenity_id}":{"delete":{"tags":["AMENITIES"],"summary":"Delete Amenity","operationId":"delete_amenity_api_amenities__amenity_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"amenity_id","in":"path","required":true,"schema":{"type":"integer","title":"Amenity Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/room-amenities/":{"post":{"tags":["ROOM_AMENITIES"],"summary":"Map Amenity","operationId":"map_amenity_api_room_amenities__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomAmenityMapCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomAmenityMapResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["ROOM_AMENITIES"],"summary":"Unmap Amenity","operationId":"unmap_amenity_api_room_amenities__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"room_id","in":"query","required":true,"schema":{"type":"integer","title":"Room Id"}},{"name":"amenity_id","in":"query","required":true,"schema":{"type":"integer","title":"Amenity Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/room-amenities/room/{room_id}":{"get":{"tags":["ROOM_AMENITIES"],"summary":"Get Amenities For Room","operationId":"get_amenities_for_room_api_room_amenities_room__room_id__get","parameters":[{"name":"room_id","in":"path","required":true,"schema":{"type":"integer","title":"Room Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/rooms/{room_id}/images/":{"post":{"tags":["ROOM_IMAGES"],"summary":"Upload Image For Room","operationId":"upload_image_for_room_api_rooms__room_id__images__post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"room_id","in":"path","required":true,"schema":{"type":"integer","title":"Room Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_image_for_room_api_rooms__room_id__images__post"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["ROOM_IMAGES"],"summary":"List Images For Room","description":"Retrieve all images associated with a specific room.","operationId":"list_images_for_room_api_rooms__room_id__images__get","parameters":[{"name":"room_id","in":"path","required":true,"schema":{"type":"integer","title":"Room Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ImageResponse"},"title":"Response List Images For Room Api Rooms  Room Id  Images  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["ROOM_IMAGES"],"summary":"Delete Images For Room","description":"Hard-delete one or more images. The requester must be the uploader of each image or have room_service.WRITE.","operationId":"delete_images_for_room_api_rooms__room_id__images__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"image_ids","in":"query","required":true,"schema":{"type":"array","items":{"type":"integer"},"description":"List of image IDs to delete","title":"Image Ids"},"description":"List of image IDs to delete"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/rooms/{room_id}/images/{image_id}/primary":{"put":{"tags":["ROOM_IMAGES"],"summary":"Mark Image Primary","description":"Mark a specific image as primary for the room's images. Only the uploader or users with ROOM_MANAGEMENT.WRITE may do this.","operationId":"mark_image_primary_api_rooms__room_id__images__image_id__primary_put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"image_id","in":"path","required":true,"schema":{"type":"integer","title":"Image Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/offers/":{"post":{"tags":["OFFERS"],"summary":"Create Offer","description":"Create an offer and its room mappings via the service layer.\n\nOnly users with Resources.OFFER_MANAGEMENT and PermissionTypes.WRITE may perform this action.","operationId":"create_offer_api_offers__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OfferCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OfferResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["OFFERS"],"summary":"List Offers","operationId":"list_offers_api_offers__get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":20,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OfferResponse"},"title":"Response List Offers Api Offers  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/offers/{offer_id}":{"get":{"tags":["OFFERS"],"summary":"Get Offer","operationId":"get_offer_api_offers__offer_id__get","parameters":[{"name":"offer_id","in":"path","required":true,"schema":{"type":"integer","title":"Offer Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OfferResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["OFFERS"],"summary":"Edit Offer","operationId":"edit_offer_api_offers__offer_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"offer_id","in":"path","required":true,"schema":{"type":"integer","title":"Offer Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OfferCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OfferResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["OFFERS"],"summary":"Delete Offer","operationId":"delete_offer_api_offers__offer_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"offer_id","in":"path","required":true,"schema":{"type":"integer","title":"Offer Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/bookings/":{"post":{"tags":["BOOKINGS"],"summary":"Create Booking","operationId":"create_booking_api_bookings__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["BOOKINGS"],"summary":"Get Bookings","description":"Unified GET for bookings.\n\n- If requester is NOT a basic user and no query params are present -> return all bookings (paginated).\n- If query params (booking_id/status) are provided -> perform query. Basic users are restricted to their own bookings (user_id from token).\n- Basic users (role_id == 1) always receive only their own bookings.","operationId":"get_bookings_api_bookings__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"booking_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Booking Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":20,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BookingResponse"},"title":"Response Get Bookings Api Bookings  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/bookings/{booking_id}/cancel":{"post":{"tags":["BOOKINGS"],"summary":"Cancel Booking","operationId":"cancel_booking_api_bookings__booking_id__cancel_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"integer","title":"Booking Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefundCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefundResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/bookings/{booking_id}":{"get":{"tags":["BOOKINGS"],"summary":"Get Booking","operationId":"get_booking_api_bookings__booking_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"integer","title":"Booking Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wishlist/":{"get":{"tags":["WISHLIST"],"summary":"List Wishlist","operationId":"list_wishlist_api_wishlist__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/WishlistResponse"},"type":"array","title":"Response List Wishlist Api Wishlist  Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["WISHLIST"],"summary":"Add Wishlist","operationId":"add_wishlist_api_wishlist__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WishlistCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WishlistResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wishlist/item":{"get":{"tags":["WISHLIST"],"summary":"Get Wishlist Item","description":"Retrieve a single wishlist entry for the current user by room_type_id or offer_id.","operationId":"get_wishlist_item_api_wishlist_item_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"room_type_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Room Type Id"}},{"name":"offer_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Offer Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WishlistResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wishlist/{wishlist_id}":{"delete":{"tags":["WISHLIST"],"summary":"Delete Wishlist","operationId":"delete_wishlist_api_wishlist__wishlist_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"wishlist_id","in":"path","required":true,"schema":{"type":"integer","title":"Wishlist Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/notifications/":{"post":{"tags":["NOTIFICATIONS"],"summary":"Create Notification","operationId":"create_notification_api_notifications__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["NOTIFICATIONS"],"summary":"List Notifications","operationId":"list_notifications_api_notifications__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"include_read","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Include Read"}},{"name":"include_deleted","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Deleted"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/NotificationResponse"},"title":"Response List Notifications Api Notifications  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/notifications/{notification_id}/read":{"put":{"tags":["NOTIFICATIONS"],"summary":"Mark Read","description":"Mark the authenticated user's notification as read.","operationId":"mark_read_api_notifications__notification_id__read_put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"notification_id","in":"path","required":true,"schema":{"type":"integer","title":"Notification Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/issues/":{"post":{"tags":["ISSUES"],"summary":"Create Issue","operationId":"create_issue_api_issues__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_create_issue_api_issues__post"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IssueResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["ISSUES"],"summary":"List My Issues","operationId":"list_my_issues_api_issues__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/IssueResponse"},"title":"Response List My Issues Api Issues  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/issues/{issue_id}":{"get":{"tags":["ISSUES"],"summary":"Get My Issue","operationId":"get_my_issue_api_issues__issue_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"issue_id","in":"path","required":true,"schema":{"type":"integer","title":"Issue Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IssueResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["ISSUES"],"summary":"Update My Issue","operationId":"update_my_issue_api_issues__issue_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"issue_id","in":"path","required":true,"schema":{"type":"integer","title":"Issue Id"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_update_my_issue_api_issues__issue_id__put"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IssueResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/issues/{issue_id}/chat":{"post":{"tags":["ISSUES"],"summary":"Post Chat","operationId":"post_chat_api_issues__issue_id__chat_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"issue_id","in":"path","required":true,"schema":{"type":"integer","title":"Issue Id"}}],"requestBody":{"required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_post_chat_api_issues__issue_id__chat_post"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["ISSUES"],"summary":"List Chats","operationId":"list_chats_api_issues__issue_id__chat_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"issue_id","in":"path","required":true,"schema":{"type":"integer","title":"Issue Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/issues/admin/":{"get":{"tags":["ISSUES"],"summary":"Admin List Issues","operationId":"admin_list_issues_api_issues_admin__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/IssueResponse"},"title":"Response Admin List Issues Api Issues Admin  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/issues/admin/{issue_id}":{"get":{"tags":["ISSUES"],"summary":"Admin Get Issue","operationId":"admin_get_issue_api_issues_admin__issue_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"issue_id","in":"path","required":true,"schema":{"type":"integer","title":"Issue Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IssueResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["ISSUES"],"summary":"Admin Update Issue","operationId":"admin_update_issue_api_issues_admin__issue_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"issue_id","in":"path","required":true,"schema":{"type":"integer","title":"Issue Id"}}],"requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_admin_update_issue_api_issues_admin__issue_id__put"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IssueResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/issues/admin/{issue_id}/chat":{"post":{"tags":["ISSUES"],"summary":"Admin Post Chat","operationId":"admin_post_chat_api_issues_admin__issue_id__chat_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"issue_id","in":"path","required":true,"schema":{"type":"integer","title":"Issue Id"}}],"requestBody":{"required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_admin_post_chat_api_issues_admin__issue_id__chat_post"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["ISSUES"],"summary":"Admin List Chats","operationId":"admin_list_chats_api_issues_admin__issue_id__chat_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"issue_id","in":"path","required":true,"schema":{"type":"integer","title":"Issue Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/reviews/":{"post":{"tags":["REVIEWS"],"summary":"Create Review","operationId":"create_review_api_reviews__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_create_review_api_reviews__post"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["REVIEWS"],"summary":"List Or Get Reviews","description":"If review_id is provided return that single review (with images), otherwise return list (optionally filtered by booking_id).\n\nEach returned review will include attached images in the `images` field.","operationId":"list_or_get_reviews_api_reviews__get","parameters":[{"name":"review_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Review Id"}},{"name":"booking_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Booking Id"}},{"name":"room_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Room Id"}},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/ReviewResponse"},{"type":"array","items":{"$ref":"#/components/schemas/ReviewResponse"}}],"title":"Response List Or Get Reviews Api Reviews  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/reviews/{review_id}/respond":{"put":{"tags":["REVIEWS"],"summary":"Respond Review","operationId":"respond_review_api_reviews__review_id__respond_put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"review_id","in":"path","required":true,"schema":{"type":"integer","title":"Review Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminResponseCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/reviews/{review_id}":{"put":{"tags":["REVIEWS"],"summary":"Update Review","description":"Allow the authenticated reviewer to update their review's rating/comment.","operationId":"update_review_api_reviews__review_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"review_id","in":"path","required":true,"schema":{"type":"integer","title":"Review Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/reviews/{review_id}/images":{"post":{"tags":["REVIEWS"],"summary":"Add Review Image","description":"Upload one or more images for a review.\n\ncaptions may be provided as repeated form fields (`-F \"captions=one\" -F \"captions=two\"`) and\nwill be applied to files by index. If there are fewer captions than files, remaining captions are None.","operationId":"add_review_image_api_reviews__review_id__images_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"review_id","in":"path","required":true,"schema":{"type":"integer","title":"Review Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_add_review_image_api_reviews__review_id__images_post"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ImageResponse"},"title":"Response Add Review Image Api Reviews  Review Id  Images Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["REVIEWS"],"summary":"List Review Images","operationId":"list_review_images_api_reviews__review_id__images_get","parameters":[{"name":"review_id","in":"path","required":true,"schema":{"type":"integer","title":"Review Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ImageResponse"},"title":"Response List Review Images Api Reviews  Review Id  Images Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["REVIEWS"],"summary":"Delete Review Images","description":"Delete specified image ids attached to a review. Only the uploader/review-owner or ROOM_MANAGEMENT.WRITE may delete.\n\nCaller must provide a list of image_ids (JSON body).","operationId":"delete_review_images_api_reviews__review_id__images_delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"review_id","in":"path","required":true,"schema":{"type":"integer","title":"Review Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"type":"integer"},"title":"Image Ids"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/refunds/{refund_id}/transaction":{"put":{"tags":["REFUNDS"],"summary":"Complete Refund","operationId":"complete_refund_api_refunds__refund_id__transaction_put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"refund_id","in":"path","required":true,"schema":{"type":"integer","title":"Refund Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefundTransactionUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefundResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/refunds":{"get":{"tags":["REFUNDS"],"summary":"Get Refunds","description":"Unified GET for refunds.\n\nRules:\n- If `refund_id` provided -> return that refund (basic users can only access their own).\n- Basic users (role_id == 1) can only query their refunds (user_id derived from token).\n- Non-basic users can query across all refunds. If no filters provided, return paginated list.","operationId":"get_refunds_api_refunds_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"refund_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Refund Id"}},{"name":"booking_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Booking Id"}},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"User Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Type"}},{"name":"from_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"From Date"}},{"name":"to_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"To Date"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RefundResponse"},"title":"Response Get Refunds Api Refunds Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/booking-edits/":{"post":{"tags":["BOOKING-EDITS"],"summary":"Create Booking Edit","description":"Create a booking edit request (customer initiated).","operationId":"create_booking_edit_booking_edits__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingEditCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingEditResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/booking-edits/active":{"get":{"tags":["BOOKING-EDITS"],"summary":"Get Active Booking Edit","description":"Fetch active edit for a booking.\nReturns None if no edit is active (PENDING or AWAITING_CUSTOMER_RESPONSE).","operationId":"get_active_booking_edit_booking_edits_active_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"booking_id","in":"query","required":true,"schema":{"type":"integer","title":"Booking Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/BookingEditResponse"},{"type":"null"}],"title":"Response Get Active Booking Edit Booking Edits Active Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/booking-edits/{booking_id}":{"get":{"tags":["BOOKING-EDITS"],"summary":"Get All Booking Edits","description":"Retrieve all edits linked to a specific booking.","operationId":"get_all_booking_edits_booking_edits__booking_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"integer","title":"Booking Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BookingEditResponse"},"title":"Response Get All Booking Edits Booking Edits  Booking Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/booking-edits/{edit_id}/review":{"post":{"tags":["BOOKING-EDITS"],"summary":"Review Booking Edit","description":"Admin suggests room changes and locks them for 30 minutes.","operationId":"review_booking_edit_booking_edits__edit_id__review_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"edit_id","in":"path","required":true,"schema":{"type":"integer","title":"Edit Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewPayload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/booking-edits/{edit_id}/decision":{"post":{"tags":["BOOKING-EDITS"],"summary":"Decision Booking Edit","description":"Customer accepts or rejects the admin-proposed edit.","operationId":"decision_booking_edit_booking_edits__edit_id__decision_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"edit_id","in":"path","required":true,"schema":{"type":"integer","title":"Edit Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DecisionPayload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/profile/":{"get":{"tags":["PROFILE"],"summary":"Get My Profile","description":"Return the authenticated user's profile.","operationId":"get_my_profile_api_profile__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"put":{"tags":["PROFILE"],"summary":"Update My Profile","description":"Update allowed profile fields. Accepts either JSON (application/json) or multipart/form-data (form fields).\n\nThis endpoint handles only scalar/profile fields. Image uploads must use the dedicated\nPOST /api/profile/image endpoint.","operationId":"update_my_profile_api_profile__put","requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/ProfileUpdate"},{"type":"null"}],"title":"Payload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/profile/image":{"post":{"tags":["PROFILE"],"summary":"Upload Profile Image","description":"Upload a profile image and set the user's profile_image_url.","operationId":"upload_profile_image_api_profile_image_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_profile_image_api_profile_image_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/profile/password":{"put":{"tags":["PROFILE"],"summary":"Change My Password","description":"Change current user's password by verifying current password.","operationId":"change_my_password_api_profile_password_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordPayload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}}},"components":{"schemas":{"AdminResponseCreate":{"properties":{"admin_response":{"type":"string","title":"Admin Response"}},"type":"object","required":["admin_response"],"title":"AdminResponseCreate","description":"Payload used by admins to post a response to a review."},"AmenityCreate":{"properties":{"amenity_name":{"type":"string","maxLength":100,"title":"Amenity Name"}},"type":"object","required":["amenity_name"],"title":"AmenityCreate"},"AmenityResponse":{"properties":{"amenity_name":{"type":"string","maxLength":100,"title":"Amenity Name"},"amenity_id":{"type":"integer","title":"Amenity Id"}},"type":"object","required":["amenity_name","amenity_id"],"title":"AmenityResponse"},"Body_add_review_image_api_reviews__review_id__images_post":{"properties":{"files":{"items":{"type":"string","format":"binary"},"type":"array","title":"Files"},"captions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Captions"}},"type":"object","required":["files"],"title":"Body_add_review_image_api_reviews__review_id__images_post"},"Body_admin_post_chat_api_issues_admin__issue_id__chat_post":{"properties":{"message":{"type":"string","title":"Message"}},"type":"object","required":["message"],"title":"Body_admin_post_chat_api_issues_admin__issue_id__chat_post"},"Body_admin_update_issue_api_issues_admin__issue_id__put":{"properties":{"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},"type":"object","title":"Body_admin_update_issue_api_issues_admin__issue_id__put"},"Body_create_issue_api_issues__post":{"properties":{"booking_id":{"type":"integer","title":"Booking Id"},"room_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Room Id"},"title":{"type":"string","title":"Title"},"description":{"type":"string","title":"Description"},"images":{"anyOf":[{"items":{"type":"string","format":"binary"},"type":"array"},{"type":"null"}],"title":"Images","default":[]}},"type":"object","required":["booking_id","title","description"],"title":"Body_create_issue_api_issues__post"},"Body_create_review_api_reviews__post":{"properties":{"booking_id":{"type":"integer","title":"Booking Id"},"room_type_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Room Type Id"},"rating":{"type":"integer","title":"Rating"},"comment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Comment"}},"type":"object","required":["booking_id","rating"],"title":"Body_create_review_api_reviews__post"},"Body_login_auth_login_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","format":"password","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_auth_login_post"},"Body_post_chat_api_issues__issue_id__chat_post":{"properties":{"message":{"type":"string","title":"Message"}},"type":"object","required":["message"],"title":"Body_post_chat_api_issues__issue_id__chat_post"},"Body_update_my_issue_api_issues__issue_id__put":{"properties":{"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"images":{"anyOf":[{"items":{"type":"string","format":"binary"},"type":"array"},{"type":"null"}],"title":"Images"}},"type":"object","title":"Body_update_my_issue_api_issues__issue_id__put"},"Body_upload_image_for_room_api_rooms__room_id__images__post":{"properties":{"image":{"type":"string","format":"binary","title":"Image"},"caption":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Caption"},"is_primary":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Primary","default":false}},"type":"object","required":["image"],"title":"Body_upload_image_for_room_api_rooms__room_id__images__post"},"Body_upload_profile_image_api_profile_image_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_profile_image_api_profile_image_post"},"BookingCreate":{"properties":{"user_id":{"type":"integer","title":"User Id"},"rooms":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Rooms","default":[]},"room_count":{"type":"integer","minimum":1.0,"title":"Room Count"},"check_in":{"type":"string","format":"date","title":"Check In"},"check_in_time":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Check In Time","default":"12:00:00"},"check_out":{"type":"string","format":"date","title":"Check Out"},"check_out_time":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Check Out Time","default":"11:00:00"},"total_price":{"type":"number","title":"Total Price"},"offer_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Offer Id"},"offer_discount_percent":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Offer Discount Percent","default":0.0},"primary_customer_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Primary Customer Name"},"primary_customer_phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Primary Customer Phone Number"},"primary_customer_dob":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Primary Customer Dob"},"payment":{"anyOf":[{"$ref":"#/components/schemas/BookingPaymentCreate"},{"type":"null"}]}},"type":"object","required":["user_id","room_count","check_in","check_out","total_price"],"title":"BookingCreate"},"BookingEditCreate":{"properties":{"booking_id":{"type":"integer","title":"Booking Id"},"user_id":{"type":"integer","title":"User Id"},"primary_customer_name":{"type":"string","maxLength":150,"title":"Primary Customer Name"},"primary_customer_phno":{"type":"string","maxLength":20,"title":"Primary Customer Phno"},"primary_customer_dob":{"type":"string","format":"date","title":"Primary Customer Dob"},"check_in_date":{"type":"string","format":"date","title":"Check In Date"},"check_out_date":{"type":"string","format":"date","title":"Check Out Date"},"check_in_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Check In Time"},"check_out_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Check Out Time"},"total_price":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"null"}],"title":"Total Price"},"edit_type":{"anyOf":[{"type":"string","enum":["PRE","POST"]},{"type":"null"}],"title":"Edit Type"},"requested_by":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Requested By"},"requested_room_changes":{"anyOf":[{"additionalProperties":{"type":"integer"},"type":"object"},{"type":"null"}],"title":"Requested Room Changes","description":"Mapping of room_id -> requested new room_type_id by customer"}},"type":"object","required":["booking_id","user_id","primary_customer_name","primary_customer_phno","primary_customer_dob","check_in_date","check_out_date"],"title":"BookingEditCreate","description":"Used when user submits a new edit request."},"BookingEditResponse":{"properties":{"booking_id":{"type":"integer","title":"Booking Id"},"user_id":{"type":"integer","title":"User Id"},"primary_customer_name":{"type":"string","maxLength":150,"title":"Primary Customer Name"},"primary_customer_phno":{"type":"string","maxLength":20,"title":"Primary Customer Phno"},"primary_customer_dob":{"type":"string","format":"date","title":"Primary Customer Dob"},"check_in_date":{"type":"string","format":"date","title":"Check In Date"},"check_out_date":{"type":"string","format":"date","title":"Check Out Date"},"check_in_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Check In Time"},"check_out_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Check Out Time"},"total_price":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"null"}],"title":"Total Price"},"edit_type":{"anyOf":[{"type":"string","enum":["PRE","POST"]},{"type":"null"}],"title":"Edit Type"},"requested_by":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Requested By"},"requested_room_changes":{"anyOf":[{"additionalProperties":{"type":"integer"},"type":"object"},{"type":"null"}],"title":"Requested Room Changes","description":"Mapping of room_id -> requested new room_type_id by customer"},"edit_id":{"type":"integer","title":"Edit Id"},"status_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Status Id"},"edit_status":{"type":"string","title":"Edit Status"},"reviewed_by":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Reviewed By"},"requested_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Requested At"},"processed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Processed At"},"lock_expires_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Lock Expires At"},"is_deleted":{"type":"boolean","title":"Is Deleted"}},"type":"object","required":["booking_id","user_id","primary_customer_name","primary_customer_phno","primary_customer_dob","check_in_date","check_out_date","edit_id","status_id","edit_status","reviewed_by","requested_at","processed_at","lock_expires_at","is_deleted"],"title":"BookingEditResponse"},"BookingPaymentCreate":{"properties":{"method_id":{"type":"integer","title":"Method Id"},"transaction_reference":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transaction Reference"},"remarks":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Remarks"}},"type":"object","required":["method_id"],"title":"BookingPaymentCreate","description":"Payment details accepted during booking creation (booking_id is assigned by backend)."},"BookingResponse":{"properties":{"booking_id":{"type":"integer","title":"Booking Id"},"user_id":{"type":"integer","title":"User Id"},"room_count":{"type":"integer","title":"Room Count"},"check_in":{"type":"string","format":"date","title":"Check In"},"check_in_time":{"type":"string","format":"time","title":"Check In Time"},"check_out":{"type":"string","format":"date","title":"Check Out"},"check_out_time":{"type":"string","format":"time","title":"Check Out Time"},"total_price":{"type":"number","title":"Total Price"},"offer_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Offer Id"},"offer_discount_percent":{"type":"number","title":"Offer Discount Percent"},"status":{"type":"string","title":"Status"},"is_deleted":{"type":"boolean","title":"Is Deleted"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"primary_customer_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Primary Customer Name"},"primary_customer_phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Primary Customer Phone Number"},"primary_customer_dob":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Primary Customer Dob"},"rooms":{"anyOf":[{"items":{"$ref":"#/components/schemas/BookingRoomMapResponse"},"type":"array"},{"type":"null"}],"title":"Rooms","default":[]},"taxes":{"anyOf":[{"items":{"$ref":"#/components/schemas/BookingTaxMapResponse"},"type":"array"},{"type":"null"}],"title":"Taxes","default":[]}},"type":"object","required":["booking_id","user_id","room_count","check_in","check_in_time","check_out","check_out_time","total_price","offer_id","offer_discount_percent","status","is_deleted","primary_customer_name","primary_customer_phone_number","primary_customer_dob"],"title":"BookingResponse"},"BookingRoomMapResponse":{"properties":{"booking_id":{"type":"integer","title":"Booking Id"},"room_id":{"type":"integer","title":"Room Id"},"room_type_id":{"type":"integer","title":"Room Type Id"},"adults":{"type":"integer","minimum":1.0,"title":"Adults"},"children":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Children","default":0},"offer_discount_percent":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Offer Discount Percent","default":0.0},"is_pre_edited_room":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Pre Edited Room","default":false},"is_post_edited_room":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Post Edited Room","default":false},"is_room_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Room Active","default":true},"rating_given":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rating Given","default":0},"edit_suggested_rooms":{"anyOf":[{},{"type":"null"}],"title":"Edit Suggested Rooms"}},"type":"object","required":["booking_id","room_id","room_type_id","adults"],"title":"BookingRoomMapResponse"},"BookingTaxMapResponse":{"properties":{"booking_id":{"type":"integer","title":"Booking Id"},"tax_id":{"type":"integer","title":"Tax Id"},"tax_amount":{"type":"number","title":"Tax Amount"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["booking_id","tax_id","tax_amount","created_at"],"title":"BookingTaxMapResponse"},"ChangePasswordPayload":{"properties":{"current_password":{"type":"string","title":"Current Password"},"new_password":{"type":"string","title":"New Password"}},"type":"object","required":["current_password","new_password"],"title":"ChangePasswordPayload"},"DecisionPayload":{"properties":{"note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Note"},"room_decisions":{"additionalProperties":{"prefixItems":[{"type":"string","enum":["ACCEPT","KEEP","REFUND"]},{"type":"integer"}],"type":"array","maxItems":2,"minItems":2},"type":"object","title":"Room Decisions","description":"Mapping of room_id -> (decision, room_id). Example: {2: ('ACCEPT', 101), 5: ('KEEP', -1), 7: ('REFUND', -1)}"}},"type":"object","required":["room_decisions"],"title":"DecisionPayload"},"FreezeReason":{"type":"string","enum":["NONE","CLEANING","ADMIN_LOCK","SYSTEM_HOLD"],"title":"FreezeReason"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ImageResponse":{"properties":{"image_id":{"type":"integer","title":"Image Id"},"entity_type":{"type":"string","title":"Entity Type"},"entity_id":{"type":"integer","title":"Entity Id"},"image_url":{"type":"string","title":"Image Url"},"caption":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Caption"},"is_primary":{"type":"boolean","title":"Is Primary"},"uploaded_by":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Uploaded By"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"is_deleted":{"type":"boolean","title":"Is Deleted"}},"type":"object","required":["image_id","entity_type","entity_id","image_url","is_primary","created_at","is_deleted"],"title":"ImageResponse"},"IssueResponse":{"properties":{"issue_id":{"type":"integer","title":"Issue Id"},"booking_id":{"type":"integer","title":"Booking Id"},"room_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Room Id"},"user_id":{"type":"integer","title":"User Id"},"title":{"type":"string","title":"Title"},"description":{"type":"string","title":"Description"},"images":{"items":{"type":"integer"},"type":"array","title":"Images"},"status":{"$ref":"#/components/schemas/IssueStatus"},"reported_at":{"type":"string","format":"date-time","title":"Reported At"},"resolved_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Resolved At"},"last_updated":{"type":"string","format":"date-time","title":"Last Updated"},"is_deleted":{"type":"boolean","title":"Is Deleted"},"resolved_by":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Resolved By"}},"type":"object","required":["issue_id","booking_id","user_id","title","description","images","status","reported_at","last_updated","is_deleted"],"title":"IssueResponse"},"IssueStatus":{"type":"string","enum":["PENDING","IN_PROGRESS","RESOLVED","CLOSED"],"title":"IssueStatus"},"NotificationCreate":{"properties":{"resc_user_id":{"type":"integer","title":"Resc User Id"},"notification_type":{"type":"string","enum":["SYSTEM","PROMOTIONAL","REMINDER","TRANSACTIONAL","SECURITY","OTHER"],"title":"Notification Type"},"entity_type":{"anyOf":[{"type":"string","enum":["BOOKING","PAYMENT","REFUND","ISSUE","OFFER","REVIEW","WISHLIST","USER_ACCOUNT","SYSTEM","ROOM"]},{"type":"null"}],"title":"Entity Type"},"entity_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Entity Id"},"title":{"type":"string","title":"Title"},"message":{"type":"string","title":"Message"}},"type":"object","required":["resc_user_id","notification_type","title","message"],"title":"NotificationCreate"},"NotificationResponse":{"properties":{"notification_id":{"type":"integer","title":"Notification Id"},"recipient_user_id":{"type":"integer","title":"Recipient User Id"},"notification_type":{"type":"string","title":"Notification Type"},"entity_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Entity Type"},"entity_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Entity Id"},"title":{"type":"string","title":"Title"},"message":{"type":"string","title":"Message"},"is_read":{"type":"boolean","title":"Is Read"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"read_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Read At"},"is_deleted":{"type":"boolean","title":"Is Deleted"}},"type":"object","required":["notification_id","recipient_user_id","notification_type","entity_type","entity_id","title","message","is_read","created_at","is_deleted"],"title":"NotificationResponse"},"OTPRequest":{"properties":{"email":{"type":"string","title":"Email"},"verification_type":{"type":"string","title":"Verification Type"}},"type":"object","required":["email","verification_type"],"title":"OTPRequest"},"OTPVerify":{"properties":{"email":{"type":"string","title":"Email"},"otp":{"type":"string","title":"Otp"},"verification_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Verification Type","default":"PASSWORD_RESET"},"new_password":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"New Password"}},"type":"object","required":["email","otp"],"title":"OTPVerify"},"OfferCreate":{"properties":{"offer_name":{"type":"string","maxLength":100,"title":"Offer Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"offer_items":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Offer Items","description":"Array of perks/features"},"discount_percent":{"anyOf":[{"type":"number","maximum":100.0,"minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Discount Percent","description":"Percentage discount applied"},"start_date":{"type":"string","format":"date","title":"Start Date"},"expiry_date":{"type":"string","format":"date","title":"Expiry Date"},"room_types":{"items":{"type":"integer"},"type":"array","title":"Room Types","description":"Room type IDs under this offer"},"offer_price":{"type":"integer","title":"Offer Price"}},"type":"object","required":["offer_name","discount_percent","start_date","expiry_date","room_types","offer_price"],"title":"OfferCreate"},"OfferResponse":{"properties":{"offer_price":{"type":"integer","title":"Offer Price"},"offer_id":{"type":"integer","title":"Offer Id"},"offer_name":{"type":"string","title":"Offer Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"offer_items":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Offer Items"},"discount_percent":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Discount Percent"},"start_date":{"type":"string","format":"date","title":"Start Date"},"expiry_date":{"type":"string","format":"date","title":"Expiry Date"},"created_by":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Created By"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"},"is_deleted":{"type":"boolean","title":"Is Deleted"},"room_mappings":{"anyOf":[{"items":{"$ref":"#/components/schemas/OfferRoomMapBase"},"type":"array"},{"type":"null"}],"title":"Room Mappings"}},"type":"object","required":["offer_price","offer_id","offer_name","description","offer_items","discount_percent","start_date","expiry_date","created_by","is_deleted"],"title":"OfferResponse"},"OfferRoomMapBase":{"properties":{"room_type_id":{"type":"integer","title":"Room Type Id"},"actual_price":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Actual Price","description":"Original room price"},"discounted_price":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Discounted Price","description":"Discounted offer price"},"room_type":{"anyOf":[{"$ref":"#/components/schemas/RoomType"},{"type":"null"}]}},"type":"object","required":["room_type_id","actual_price","discounted_price"],"title":"OfferRoomMapBase"},"ProfileResponse":{"properties":{"user_id":{"type":"integer","title":"User Id"},"full_name":{"type":"string","title":"Full Name"},"email":{"type":"string","title":"Email"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"},"role_id":{"type":"integer","title":"Role Id"},"dob":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Dob"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"}},"type":"object","required":["user_id","full_name","email","role_id"],"title":"ProfileResponse"},"ProfileUpdate":{"properties":{"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"},"dob":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Dob"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"}},"type":"object","title":"ProfileUpdate"},"RefreshRequest":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["refresh_token"],"title":"RefreshRequest"},"RefundCreate":{"properties":{"full_cancellation":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Full Cancellation","default":false},"refund_amount":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Refund Amount"},"refund_rooms":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Refund Rooms"},"remarks":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Remarks"},"transaction_method_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Transaction Method Id"},"transaction_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transaction Number"}},"type":"object","title":"RefundCreate","description":"Payload for cancelling a booking and requesting a refund.\n\nbooking_id is supplied via the path parameter, and user_id is derived from the authenticated user.\nThe body should contain only the minimal fields needed for a refund request."},"RefundResponse":{"properties":{"refund_id":{"type":"integer","title":"Refund Id"},"booking_id":{"type":"integer","title":"Booking Id"},"user_id":{"type":"integer","title":"User Id"},"type":{"type":"string","title":"Type"},"status":{"type":"string","title":"Status"},"refund_amount":{"type":"number","title":"Refund Amount"},"initiated_at":{"type":"string","format":"date-time","title":"Initiated At"},"processed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Processed At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"remarks":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Remarks"},"is_deleted":{"type":"boolean","title":"Is Deleted"},"transaction_method_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Transaction Method Id"},"transaction_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transaction Number"},"full_cancellation":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Full Cancellation","default":false}},"type":"object","required":["refund_id","booking_id","user_id","type","status","refund_amount","initiated_at","processed_at","completed_at","remarks","is_deleted","transaction_method_id","transaction_number"],"title":"RefundResponse"},"RefundTransactionUpdate":{"properties":{"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"},"transaction_method_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Transaction Method Id"},"transaction_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transaction Number"}},"type":"object","title":"RefundTransactionUpdate","description":"Admin payload to update refund transaction details.\n\nOnly these fields are allowed to be changed by admin:\n- status\n- transaction_method_id\n- transaction_number"},"ReviewPayload":{"properties":{"suggested_rooms":{"anyOf":[{"additionalProperties":{"items":{"type":"integer"},"type":"array"},"type":"object"},{"type":"null"}],"title":"Suggested Rooms","description":"Mapping of room_map_id -> suggested room IDs by admin"},"note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Note"}},"type":"object","title":"ReviewPayload"},"ReviewResponse":{"properties":{"booking_id":{"type":"integer","title":"Booking Id"},"room_type_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Room Type Id"},"rating":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Rating","description":"Rating between 1 and 5"},"comment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Comment"},"review_id":{"type":"integer","title":"Review Id"},"user_id":{"type":"integer","title":"User Id"},"admin_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Admin Id"},"admin_response":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Response"},"responded_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Responded At"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"is_deleted":{"type":"boolean","title":"Is Deleted","default":false},"images":{"anyOf":[{"items":{"$ref":"#/components/schemas/ImageResponse"},"type":"array"},{"type":"null"}],"title":"Images","default":[]}},"type":"object","required":["booking_id","rating","review_id","user_id","created_at","updated_at"],"title":"ReviewResponse"},"ReviewUpdate":{"properties":{"rating":{"anyOf":[{"type":"integer","maximum":5.0,"minimum":1.0},{"type":"null"}],"title":"Rating","description":"Rating between 1 and 5"},"comment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Comment"}},"type":"object","title":"ReviewUpdate","description":"Model used by a user to update their review. Only rating and comment are editable by the reviewer."},"RoleCreate":{"properties":{"role_name":{"type":"string","title":"Role Name"},"role_description":{"type":"string","title":"Role Description"}},"type":"object","required":["role_name","role_description"],"title":"RoleCreate"},"RolePermissionAssign":{"properties":{"role_id":{"type":"integer","title":"Role Id"},"permission_ids":{"items":{"type":"integer"},"type":"array","title":"Permission Ids"}},"type":"object","required":["role_id","permission_ids"],"title":"RolePermissionAssign"},"RolePermissionResponse":{"properties":{"role_id":{"type":"integer","title":"Role Id"},"assigned_permission_ids":{"items":{"type":"integer"},"type":"array","title":"Assigned Permission Ids"},"message":{"type":"string","title":"Message","default":"Permissions assigned successfully"}},"type":"object","required":["role_id","assigned_permission_ids"],"title":"RolePermissionResponse"},"RoleResponse":{"properties":{"role_name":{"type":"string","title":"Role Name"},"role_description":{"type":"string","title":"Role Description"},"role_id":{"type":"integer","title":"Role Id"},"message":{"type":"string","title":"Message","default":"Role created successfully"}},"type":"object","required":["role_name","role_description","role_id"],"title":"RoleResponse"},"RoomAmenityMapCreate":{"properties":{"room_id":{"type":"integer","title":"Room Id"},"amenity_id":{"type":"integer","title":"Amenity Id"}},"type":"object","required":["room_id","amenity_id"],"title":"RoomAmenityMapCreate"},"RoomAmenityMapResponse":{"properties":{"room_id":{"type":"integer","title":"Room Id"},"amenity_id":{"type":"integer","title":"Amenity Id"}},"type":"object","required":["room_id","amenity_id"],"title":"RoomAmenityMapResponse"},"RoomCreate":{"properties":{"room_no":{"type":"string","maxLength":20,"title":"Room No"},"room_type_id":{"type":"integer","title":"Room Type Id"},"room_status":{"anyOf":[{"$ref":"#/components/schemas/RoomStatus"},{"type":"null"}],"default":"AVAILABLE"},"freeze_reason":{"anyOf":[{"$ref":"#/components/schemas/FreezeReason"},{"type":"null"}]}},"type":"object","required":["room_no","room_type_id"],"title":"RoomCreate"},"RoomResponse":{"properties":{"room_id":{"type":"integer","title":"Room Id"},"room_no":{"type":"string","title":"Room No"},"room_type_id":{"type":"integer","title":"Room Type Id"},"price_per_night":{"type":"number","title":"Price Per Night"},"max_adult_count":{"type":"integer","title":"Max Adult Count"},"max_child_count":{"type":"integer","title":"Max Child Count"},"room_status":{"$ref":"#/components/schemas/RoomStatus"},"freeze_reason":{"anyOf":[{"$ref":"#/components/schemas/FreezeReason"},{"type":"null"}]},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["room_id","room_no","room_type_id","price_per_night","max_adult_count","max_child_count","room_status","freeze_reason","created_at","updated_at"],"title":"RoomResponse"},"RoomStatus":{"type":"string","enum":["AVAILABLE","BOOKED","MAINTENANCE","FROZEN"],"title":"RoomStatus"},"RoomType":{"properties":{"room_type_id":{"type":"integer","title":"Room Type Id"},"type_name":{"type":"string","title":"Type Name"},"price_per_night":{"type":"number","title":"Price Per Night"},"max_adult_count":{"type":"integer","title":"Max Adult Count"},"max_child_count":{"type":"integer","title":"Max Child Count"},"square_ft":{"type":"integer","title":"Square Ft"}},"type":"object","required":["room_type_id","type_name","price_per_night","max_adult_count","max_child_count","square_ft"],"title":"RoomType"},"RoomTypeCreate":{"properties":{"type_name":{"type":"string","maxLength":50,"title":"Type Name"},"max_adult_count":{"type":"integer","minimum":1.0,"title":"Max Adult Count"},"max_child_count":{"type":"integer","minimum":0.0,"title":"Max Child Count","default":0},"price_per_night":{"type":"number","minimum":0.0,"title":"Price Per Night"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"square_ft":{"type":"integer","minimum":0.0,"title":"Square Ft"}},"type":"object","required":["type_name","max_adult_count","price_per_night","square_ft"],"title":"RoomTypeCreate"},"RoomTypeResponse":{"properties":{"type_name":{"type":"string","maxLength":50,"title":"Type Name"},"max_adult_count":{"type":"integer","minimum":1.0,"title":"Max Adult Count"},"max_child_count":{"type":"integer","minimum":0.0,"title":"Max Child Count","default":0},"price_per_night":{"type":"number","minimum":0.0,"title":"Price Per Night"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"square_ft":{"type":"integer","minimum":0.0,"title":"Square Ft"},"room_type_id":{"type":"integer","title":"Room Type Id"},"is_deleted":{"type":"boolean","title":"Is Deleted"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["type_name","max_adult_count","price_per_night","square_ft","room_type_id","is_deleted","created_at","updated_at"],"title":"RoomTypeResponse"},"RoomTypeUpdate":{"properties":{"type_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Type Name"},"max_adult_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Adult Count"},"max_child_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Child Count"},"price_per_night":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price Per Night"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"square_ft":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Square Ft"}},"type":"object","title":"RoomTypeUpdate"},"RoomUpdate":{"properties":{"room_no":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Room No"},"room_type_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Room Type Id"},"room_status":{"anyOf":[{"$ref":"#/components/schemas/RoomStatus"},{"type":"null"}]},"freeze_reason":{"anyOf":[{"$ref":"#/components/schemas/FreezeReason"},{"type":"null"}]}},"type":"object","title":"RoomUpdate"},"TokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"expires_in":{"type":"integer","title":"Expires In"},"refresh_token":{"type":"string","title":"Refresh Token"},"role_id":{"type":"integer","title":"Role Id"}},"type":"object","required":["access_token","expires_in","refresh_token","role_id"],"title":"TokenResponse"},"UserCreate":{"properties":{"full_name":{"type":"string","title":"Full Name"},"email":{"type":"string","title":"Email"},"password":{"type":"string","title":"Password"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"},"role_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Role Id","default":1}},"type":"object","required":["full_name","email","password"],"title":"UserCreate"},"UserResponse":{"properties":{"user_id":{"type":"integer","title":"User Id"},"full_name":{"type":"string","title":"Full Name"},"email":{"type":"string","title":"Email"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"},"role_id":{"type":"integer","title":"Role Id"}},"type":"object","required":["user_id","full_name","email","role_id"],"title":"UserResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WishlistCreate":{"properties":{"user_id":{"type":"integer","title":"User Id"},"room_type_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Room Type Id"},"offer_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Offer Id"}},"type":"object","required":["user_id"],"title":"WishlistCreate"},"WishlistResponse":{"properties":{"wishlist_id":{"type":"integer","title":"Wishlist Id"},"user_id":{"type":"integer","title":"User Id"},"room_type_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Room Type Id"},"offer_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Offer Id"},"added_at":{"type":"string","format":"date-time","title":"Added At"},"is_deleted":{"type":"boolean","title":"Is Deleted"}},"type":"object","required":["wishlist_id","user_id","room_type_id","offer_id","added_at","is_deleted"],"title":"WishlistResponse"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/auth/login"}}}}}}